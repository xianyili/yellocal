const gitfavoritemli= document.querySelector('#gitfavoritemlist');
const gifavortemcount= document.querySelector('#gifavortemcount');
function showMyfavoritem() {
   // document.body.classList.add('ifavorite');
   // favoriteBox.classList.add('show');
    getfavoritemlist();
    //searchInput.focus();
  }
  function getfavoritemlist(){
    getiFavoriteHTML(); 
}

  function getiFavoriteHTML() {
    //获取元素
    var data = getFavoriteData();
    gitfavoritemli.innerHTML = ''
   // todolist.innerHTML = ''
    var donecounts = 0;
    var todocounts = 0;
    //将获取出来的元素进行遍历，并创建称为新的li，对数据中的done属性进行判读，done的属性决定改条数据是否是完成状态
    data.forEach((item, index) => {
      //if (item.done) {
        var newLi = `
        <li class="g-itFavoritem">
            <a href="/guides/${item.ectype}.html">
            <div class="g-iFavoritem_icon">
            <p><img src="/static/pictures/guidict/${item.ectype}.jpg" width="36px"></p>
            </div>
            <div class="g-iFavoritem_minfo">
            <p class="g-iFavoritem_minfo_tit">${item.title}</p>
            <p class="g-iFavoritem_minfo_type">${item.ectype}</p>
            </div>
           
            </a>
            <div class="gitfavoritem_minfo_delte" onclick="deleFavoritem('hkclite','${index}')"><svg viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg" height="1em" width="1em">
            <path d="m8 8 32 32M8 40 40 8" stroke="#000" stroke-width="4" stroke-linecap="round" stroke-linejoin="round"/>
          </svg></div>
            
         </li>
        `
        donecounts++

        gitfavoritemli.innerHTML += newLi
    });
    gifavortemcount.innerHTML = donecounts;
    //totdocount.innerHTML = todocounts;
//<a data-index="${index}" href="javaScript:;"></a>     
}

function deleFavoritem(actype,indexid) {
    var data = getFavoriteData();
    //怎么知道自己点击的是第几个？可以获取设置的自定义属性
    var index = indexid;
    //通过数组splice方法删除指定元素
    data.splice(index, 1)
    //存储
    localStorage.setItem('favoritem', JSON.stringify(data))
    //渲染页面
    getiFavoriteHTML()
}


 